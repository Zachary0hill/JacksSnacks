# .cursorrules â€“ Jackâ€™s Snacks (Web Browserâ€‘Based Mealâ€‘Prep App)
# Purpose: Guide Cursorâ€™s AI Agent ("Builder") in scaffolding, iterating, and maintaining
# a fullâ€‘stack mealâ€‘prep **desktop web** application that mirrors the architecture of Zachâ€™s
# Businessâ€‘Hub project while focusing exclusively on desktop and largeâ€‘screen browsers.
# -----------------------------------------------------------------------------
# ğŸ—‚ï¸ 1. Project Snapshot
PROJECT_NAME: Jackâ€™s Snacks
DESCRIPTION: A browserâ€‘based platform where users plan meals, generate grocery lists,
track pantry inventory, and visualise nutrition analyticsâ€”optimised for desktop workflows.
STACK:  Next.jsÂ 14 (app router, RSC), TypeScript strict, Supabase (Postgres + RLS),
shadcn/ui + TailwindCSS, tRPC for typeâ€‘safe endpoints, Zustand for client state,
Edge Functions for AI features (OpenAI & Vision), Clerk for auth (unless overridden).
REPO_ORG: zzmedia
LICENSE: MIT

# -----------------------------------------------------------------------------
# ğŸš¦ 2. Guardâ€‘Rails for Builder
1. **Conversation style**: Concise, incremental, stepâ€‘byâ€‘step; code blocks with language tags.
   Prepend file paths (e.g. `// app/(planner)/page.tsx`).
2. **No breaking changes without confirmation** (DB schema, auth flow).
3. **Environment Safety**: never expose real keysâ€”use `process.env.*` placeholders.
4. **Ownership Lanes**:
   Â· UI componentsÂ â†’ `/components` & `/features/*`
   Â· Server logicÂ â†’ `/server/*` or `/app/api/*`
   Â· Edge FunctionsÂ â†’ `/supabase/functions/*`
   Â· TestsÂ â†’ `__tests__` (Vitest + Playwright).
5. **Performance Budgets**: LCPÂ <Â 2.5â€¯s on typical broadband, bundle chunkÂ â‰¤â€¯150Â kB gz.
6. **Accessibility**: WCAGÂ AA across keyboard + screenâ€‘reader flows.

# -----------------------------------------------------------------------------
# ğŸ› ï¸ 3. MVP Scope (PhaseÂ 1)
Â· Email / OAuth auth via Clerk or Supabase.
Â· Onboarding wizard: diet prefs, allergies, macro targets.
Â· Desktop planner view with dragâ€‘andâ€‘drop calendar grid.
Â· Recipe catalogue with scaling/remix.
Â· Grocery list generator + pantry tracking.
Â· Supabase schemas below.

# -----------------------------------------------------------------------------
# ğŸ—„ï¸ 4. Database Schema (Supabase SQL)
```sql
-- users handled by auth.users
create table profiles (
  id uuid primary key references auth.users on delete cascade,
  full_name text,
  avatar_url text,
  daily_calories int,
  created_at timestamp default now()
);
create table recipes (
  id uuid primary key default uuid_generate_v4(),
  owner uuid references auth.users on delete cascade,
  title text not null,
  ingredients jsonb not null, -- [{name, qty, unit}]
  steps text[],
  macros jsonb,
  visibility text check (visibility in ('private','public')) default 'public',
  created_at timestamp default now()
);
create table meal_plans (
  id uuid primary key default uuid_generate_v4(),
  owner uuid references auth.users on delete cascade,
  week_start date not null,
  data jsonb not null, -- {'2025-06-16':[recipe_id,...]}
  created_at timestamp default now(),
  unique(owner, week_start)
);
create table grocery_items (
  id uuid primary key default uuid_generate_v4(),
  owner uuid references auth.users on delete cascade,
  name text not null,
  quantity numeric,
  unit text,
  in_pantry boolean default false,
  created_at timestamp default now()
);
```

# -----------------------------------------------------------------------------
# ğŸ—ºï¸ 5. File / Folder Convention
```
app/
  (public)/            # Marketing pages
  (auth)/
  (dashboard)/
    layout.tsx         # Desktop layout with left sidebar
    page.tsx           # Dashboard â€“ Today overview
    planner/
    recipes/
    grocery/
    analytics/
components/
  ui/                  # shadcn components reâ€‘exported
  RecipeCard.tsx
  MacroRing.tsx
server/
  trpc/
    routers/
      mealPlan.ts
      recipe.ts
supabase/
  migrations/
  functions/
    vision-scanner.ts
.env.example
```

# -----------------------------------------------------------------------------
# ğŸ¨ 6. UI Architecture (Desktopâ€‘Centric)
* **Top Bar**: logo, global search, notifications, user avatar.
* **Left Sidebar (persistent)**: Dashboard â–¸ Planner â–¸ Recipes â–¸ Grocery â–¸ Analytics â–¸ Settings.
* **Main Content Area**: card and table layouts with a responsive grid.
* **Quickâ€‘Action Button**: bottomâ€‘right â€œ+â€ for fast meal or grocery item entry.

Screen highlights:
Â· **Dashboard**: hero card of todayâ€™s meals, macro ring, streak widget.
Â· **Planner**: calendar grid (dragâ€‘andâ€‘drop), week selector.
Â· **Recipes**: masonry grid with filter chips and tag search.
Â· **Grocery**: twoâ€‘column checklist with live subtotal banner.
Â· **Analytics**: charts for calorie adherence & grocery spend (echarts via dynamic import).

# -----------------------------------------------------------------------------
# ğŸ¤– 7. Edge & AI Functions
Â· **vision-scanner**: YOLOv8 ingredient detection from fridge or pantry photos.
Â· **meal-remix**: OpenAI function to adjust recipe for macros, portions, or ingredient swaps.

# -----------------------------------------------------------------------------
# ğŸ“ 8. Coding Standards
Â· Prettier + ESLint (airbnb-typescript).
Â· React Server Components for dataâ€‘heavy read paths.
Â· Skeleton loaders over spinners.
Â· Vitest unit tests + Playwright e2e (planner â†” grocery flow).
Â· GitHub Actions CI with typeâ€‘check, lint, test.

# -----------------------------------------------------------------------------
# ğŸ“Œ 9. TODO Tags for Builder
// TODO(builder): work items Cursor can autoâ€‘generate.
// TODO(human): content/design assets needed from Zach.

# -----------------------------------------------------------------------------
# âœ… 10. Definition of Done (PhaseÂ 1)
Â· User can: signâ€‘up â†’ onboarding â†’ create week plan â†’ generate grocery list.
Â· Desktop Lighthouse scores â‰¥Â 90 for performance & bestâ€‘practices.
Â· CI green.

# -----------------------------------------------------------------------------
# End of .cursorrules â€“ append moduleâ€‘specific rules below
